<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.54.0" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon" />
    <title>Building a Proxy Controller for Gloo :: Gloo Docs</title>

    
    <link href="/css/nucleus.css?1550255485" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1550255485" rel="stylesheet">
    <link href="/css/hybrid.css?1550255485" rel="stylesheet">
    <link href="/css/featherlight.min.css?1550255485" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1550255485" rel="stylesheet">
    <link href="/css/auto-complete.css?1550255485" rel="stylesheet">
    <link href="/css/theme.css?1550255485" rel="stylesheet">
    <link href="/css/hugo-theme.css?1550255485" rel="stylesheet">
    
      <link href="/css/theme-blue.css?1550255485" rel="stylesheet">
    

    <script src="/js/jquery-2.x.min.js?1550255485"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/0.8/dev/example-proxy-controller/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://gloo.solo.io/">
    <img src="/img/Gloo-01.png">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1550255485"></script>
<script type="text/javascript" src="/js/auto-complete.js?1550255485"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/gloo.solo.io\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1550255485"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/0.7/" title="" class="dd-item 
        
        
        
        ">
      <a href="/0.7/">
          
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/0.7/introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/0.7/introduction/">
          Introduction
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.7/introduction/architecture/" title="Architecture" class="dd-item ">
        <a href="/0.7/introduction/architecture/">
        Architecture
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/introduction/concepts/" title="Concepts" class="dd-item ">
        <a href="/0.7/introduction/concepts/">
        Concepts
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.7/installation/" title="Installing Gloo" class="dd-item 
        
        
        
        ">
      <a href="/0.7/installation/">
          Installing Gloo
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.7/installation/install_with_helm/" title="Installing Gloo with Helm" class="dd-item ">
        <a href="/0.7/installation/install_with_helm/">
        Installing Gloo with Helm
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/installation/gke/" title="Google Kubernetes Engine (GKE)" class="dd-item ">
        <a href="/0.7/installation/gke/">
        Google Kubernetes Engine (GKE)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.7/installation/docker-compose/" title="Install Gloo using Docker-Compose" class="dd-item 
        
        
        
        ">
      <a href="/0.7/installation/docker-compose/">
          Install Gloo using Docker-Compose
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/installation/node_port/" title="Production Deployment Using NodePort" class="dd-item ">
        <a href="/0.7/installation/node_port/">
        Production Deployment Using NodePort
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.7/user_guides/" title="User Guides" class="dd-item 
        
        
        
        ">
      <a href="/0.7/user_guides/">
          User Guides
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.7/user_guides/basic_routing/" title="Basic Routing" class="dd-item ">
        <a href="/0.7/user_guides/basic_routing/">
        Basic Routing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/user_guides/function_routing/" title="Function Routing" class="dd-item ">
        <a href="/0.7/user_guides/function_routing/">
        Function Routing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/user_guides/external_api_routing/" title="External API Routing" class="dd-item ">
        <a href="/0.7/user_guides/external_api_routing/">
        External API Routing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/user_guides/basic_ingress/" title="Ingress Routing" class="dd-item ">
        <a href="/0.7/user_guides/basic_ingress/">
        Ingress Routing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/user_guides/gloo_with_knative/" title="Gloo with Knative" class="dd-item ">
        <a href="/0.7/user_guides/gloo_with_knative/">
        Gloo with Knative
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.7/operator_guide/" title="Operator Guide" class="dd-item 
        
        
        
        ">
      <a href="/0.7/operator_guide/">
          Operator Guide
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.7/operator_guide/understanding_gloo_configuration/" title="Understanding Gloo Configuration" class="dd-item ">
        <a href="/0.7/operator_guide/understanding_gloo_configuration/">
        Understanding Gloo Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/operator_guide/declarative_infrastructure_and_gitops/" title="Declarative Infrastructure and GitOps" class="dd-item ">
        <a href="/0.7/operator_guide/declarative_infrastructure_and_gitops/">
        Declarative Infrastructure and GitOps
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/operator_guide/gloo_declarative_model/" title="Gloo as Declarative Infrastructure" class="dd-item ">
        <a href="/0.7/operator_guide/gloo_declarative_model/">
        Gloo as Declarative Infrastructure
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.7/v1/" title="API Reference" class="dd-item 
        
        
        
        ">
      <a href="/0.7/v1/">
          API Reference
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/google/protobuf/any.proto.sk/" title="any.proto" class="dd-item ">
        <a href="/0.7/v1/google/protobuf/any.proto.sk/">
        any.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/artifact.proto.sk/" title="artifact.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/artifact.proto.sk/">
        artifact.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/aws/aws.proto.sk/" title="aws.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/aws/aws.proto.sk/">
        aws.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/azure/azure.proto.sk/" title="azure.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/azure/azure.proto.sk/">
        azure.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/clusteringress/api/v1/cluster_ingress.proto.sk/" title="cluster_ingress.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/clusteringress/api/v1/cluster_ingress.proto.sk/">
        cluster_ingress.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/consul/consul.proto.sk/" title="consul.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/consul/consul.proto.sk/">
        consul.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/google/protobuf/descriptor.proto.sk/" title="descriptor.proto" class="dd-item ">
        <a href="/0.7/v1/google/protobuf/descriptor.proto.sk/">
        descriptor.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/google/protobuf/duration.proto.sk/" title="duration.proto" class="dd-item ">
        <a href="/0.7/v1/google/protobuf/duration.proto.sk/">
        duration.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/endpoint.proto.sk/" title="endpoint.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/endpoint.proto.sk/">
        endpoint.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/extensions.proto.sk/" title="extensions.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/extensions.proto.sk/">
        extensions.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/faultinjection/fault.proto.sk/" title="fault.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/faultinjection/fault.proto.sk/">
        fault.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/pkg/plugins/aws/filter.proto.sk/" title="filter.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/pkg/plugins/aws/filter.proto.sk/">
        filter.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gateway/api/v1/gateway.proto.sk/" title="gateway.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gateway/api/v1/gateway.proto.sk/">
        gateway.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/gateway.solo.io.project.sk/" title="gateway.solo.io.project" class="dd-item ">
        <a href="/0.7/v1/gateway.solo.io.project.sk/">
        gateway.solo.io.project
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/gloo.solo.io.project.sk/" title="gloo.solo.io.project" class="dd-item ">
        <a href="/0.7/v1/gloo.solo.io.project.sk/">
        gloo.solo.io.project
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/gogoproto/gogo.proto.sk/" title="gogo.proto" class="dd-item ">
        <a href="/0.7/v1/gogoproto/gogo.proto.sk/">
        gogo.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/grpc/grpc.proto.sk/" title="grpc.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/grpc/grpc.proto.sk/">
        grpc.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/ingress/api/v1/ingress.proto.sk/" title="ingress.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/ingress/api/v1/ingress.proto.sk/">
        ingress.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/kubernetes/kubernetes.proto.sk/" title="kubernetes.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/kubernetes/kubernetes.proto.sk/">
        kubernetes.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/solo-kit/api/v1/metadata.proto.sk/" title="metadata.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/solo-kit/api/v1/metadata.proto.sk/">
        metadata.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/parameters.proto.sk/" title="parameters.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/parameters.proto.sk/">
        parameters.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins.proto.sk/" title="plugins.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins.proto.sk/">
        plugins.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/prefix_rewrite.proto.sk/" title="prefix_rewrite.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/prefix_rewrite.proto.sk/">
        prefix_rewrite.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/proxy.proto.sk/" title="proxy.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/proxy.proto.sk/">
        proxy.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/solo-kit/api/v1/ref.proto.sk/" title="ref.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/solo-kit/api/v1/ref.proto.sk/">
        ref.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/rest/rest.proto.sk/" title="rest.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/rest/rest.proto.sk/">
        rest.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/retries/retries.proto.sk/" title="retries.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/retries/retries.proto.sk/">
        retries.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/secret.proto.sk/" title="secret.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/secret.proto.sk/">
        secret.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/ingress/api/v1/service.proto.sk/" title="service.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/ingress/api/v1/service.proto.sk/">
        service.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/service_spec.proto.sk/" title="service_spec.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/service_spec.proto.sk/">
        service_spec.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/settings.proto.sk/" title="settings.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/settings.proto.sk/">
        settings.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/solo-kit/api/v1/solo-kit.proto.sk/" title="solo-kit.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/solo-kit/api/v1/solo-kit.proto.sk/">
        solo-kit.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/static/static.proto.sk/" title="static.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/static/static.proto.sk/">
        static.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/solo-kit/api/v1/status.proto.sk/" title="status.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/solo-kit/api/v1/status.proto.sk/">
        status.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/google/protobuf/struct.proto.sk/" title="struct.proto" class="dd-item ">
        <a href="/0.7/v1/google/protobuf/struct.proto.sk/">
        struct.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/google/protobuf/timestamp.proto.sk/" title="timestamp.proto" class="dd-item ">
        <a href="/0.7/v1/google/protobuf/timestamp.proto.sk/">
        timestamp.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/transformation.proto.sk/" title="transformation.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/transformation.proto.sk/">
        transformation.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/upstream.proto.sk/" title="upstream.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gloo/api/v1/upstream.proto.sk/">
        upstream.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/github.com/solo-io/gloo/projects/gateway/api/v1/virtual_service.proto.sk/" title="virtual_service.proto" class="dd-item ">
        <a href="/0.7/v1/github.com/solo-io/gloo/projects/gateway/api/v1/virtual_service.proto.sk/">
        virtual_service.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/v1/google/protobuf/wrappers.proto.sk/" title="wrappers.proto" class="dd-item ">
        <a href="/0.7/v1/google/protobuf/wrappers.proto.sk/">
        wrappers.proto
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.7/cli/" title="Command Line Reference" class="dd-item 
        
        
        
        ">
      <a href="/0.7/cli/">
          Command Line Reference
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl/" title="glooctl" class="dd-item ">
        <a href="/0.7/cli/glooctl/">
        glooctl
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_add/" title="glooctl add" class="dd-item ">
        <a href="/0.7/cli/glooctl_add/">
        glooctl add
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_add_route/" title="glooctl add route" class="dd-item ">
        <a href="/0.7/cli/glooctl_add_route/">
        glooctl add route
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create/" title="glooctl create" class="dd-item ">
        <a href="/0.7/cli/glooctl_create/">
        glooctl create
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_secret/" title="glooctl create secret" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_secret/">
        glooctl create secret
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_secret_aws/" title="glooctl create secret aws" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_secret_aws/">
        glooctl create secret aws
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_secret_azure/" title="glooctl create secret azure" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_secret_azure/">
        glooctl create secret azure
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_secret_tls/" title="glooctl create secret tls" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_secret_tls/">
        glooctl create secret tls
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_upstream/" title="glooctl create upstream" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_upstream/">
        glooctl create upstream
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_upstream_aws/" title="glooctl create upstream aws" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_upstream_aws/">
        glooctl create upstream aws
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_upstream_azure/" title="glooctl create upstream azure" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_upstream_azure/">
        glooctl create upstream azure
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_upstream_consul/" title="glooctl create upstream consul" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_upstream_consul/">
        glooctl create upstream consul
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_upstream_kube/" title="glooctl create upstream kube" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_upstream_kube/">
        glooctl create upstream kube
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_upstream_static/" title="glooctl create upstream static" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_upstream_static/">
        glooctl create upstream static
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_create_virtualservice/" title="glooctl create virtualservice" class="dd-item ">
        <a href="/0.7/cli/glooctl_create_virtualservice/">
        glooctl create virtualservice
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_delete/" title="glooctl delete" class="dd-item ">
        <a href="/0.7/cli/glooctl_delete/">
        glooctl delete
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_delete_proxy/" title="glooctl delete proxy" class="dd-item ">
        <a href="/0.7/cli/glooctl_delete_proxy/">
        glooctl delete proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_delete_upstream/" title="glooctl delete upstream" class="dd-item ">
        <a href="/0.7/cli/glooctl_delete_upstream/">
        glooctl delete upstream
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_delete_virtualservice/" title="glooctl delete virtualservice" class="dd-item ">
        <a href="/0.7/cli/glooctl_delete_virtualservice/">
        glooctl delete virtualservice
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_get/" title="glooctl get" class="dd-item ">
        <a href="/0.7/cli/glooctl_get/">
        glooctl get
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_get_proxy/" title="glooctl get proxy" class="dd-item ">
        <a href="/0.7/cli/glooctl_get_proxy/">
        glooctl get proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_get_upstream/" title="glooctl get upstream" class="dd-item ">
        <a href="/0.7/cli/glooctl_get_upstream/">
        glooctl get upstream
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_get_virtualservice/" title="glooctl get virtualservice" class="dd-item ">
        <a href="/0.7/cli/glooctl_get_virtualservice/">
        glooctl get virtualservice
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_get_virtualservice_route/" title="glooctl get virtualservice route" class="dd-item ">
        <a href="/0.7/cli/glooctl_get_virtualservice_route/">
        glooctl get virtualservice route
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_install/" title="glooctl install" class="dd-item ">
        <a href="/0.7/cli/glooctl_install/">
        glooctl install
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_install_gateway/" title="glooctl install gateway" class="dd-item ">
        <a href="/0.7/cli/glooctl_install_gateway/">
        glooctl install gateway
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_install_ingress/" title="glooctl install ingress" class="dd-item ">
        <a href="/0.7/cli/glooctl_install_ingress/">
        glooctl install ingress
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_install_knative/" title="glooctl install knative" class="dd-item ">
        <a href="/0.7/cli/glooctl_install_knative/">
        glooctl install knative
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_proxy/" title="glooctl proxy" class="dd-item ">
        <a href="/0.7/cli/glooctl_proxy/">
        glooctl proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_proxy_dump/" title="glooctl proxy dump" class="dd-item ">
        <a href="/0.7/cli/glooctl_proxy_dump/">
        glooctl proxy dump
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_proxy_logs/" title="glooctl proxy logs" class="dd-item ">
        <a href="/0.7/cli/glooctl_proxy_logs/">
        glooctl proxy logs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_proxy_stats/" title="glooctl proxy stats" class="dd-item ">
        <a href="/0.7/cli/glooctl_proxy_stats/">
        glooctl proxy stats
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_proxy_url/" title="glooctl proxy url" class="dd-item ">
        <a href="/0.7/cli/glooctl_proxy_url/">
        glooctl proxy url
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_remove/" title="glooctl remove" class="dd-item ">
        <a href="/0.7/cli/glooctl_remove/">
        glooctl remove
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_remove_route/" title="glooctl remove route" class="dd-item ">
        <a href="/0.7/cli/glooctl_remove_route/">
        glooctl remove route
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_route/" title="glooctl route" class="dd-item ">
        <a href="/0.7/cli/glooctl_route/">
        glooctl route
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_route_sort/" title="glooctl route sort" class="dd-item ">
        <a href="/0.7/cli/glooctl_route_sort/">
        glooctl route sort
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_uninstall/" title="glooctl uninstall" class="dd-item ">
        <a href="/0.7/cli/glooctl_uninstall/">
        glooctl uninstall
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/cli/glooctl_upgrade/" title="glooctl upgrade" class="dd-item ">
        <a href="/0.7/cli/glooctl_upgrade/">
        glooctl upgrade
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.7/dev/" title="Developer Guide" class="dd-item 
        
        
        
        ">
      <a href="/0.7/dev/">
          Developer Guide
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.7/dev/example-proxy-controller/" title="Building a Proxy Controller for Gloo" class="dd-item ">
        <a href="/0.7/dev/example-proxy-controller/">
        Building a Proxy Controller for Gloo
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.7/dev/contributing/" title="Contributor Guide" class="dd-item ">
        <a href="/0.7/dev/contributing/">
        Contributor Guide
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/0.8/" title="" class="dd-item 
        parent
        
        
        ">
      <a href="/0.8/">
          
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/0.8/introduction/" title="Introduction" class="dd-item 
        
        
        
        ">
      <a href="/0.8/introduction/">
          Introduction
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.8/introduction/architecture/" title="Architecture" class="dd-item ">
        <a href="/0.8/introduction/architecture/">
        Architecture
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/introduction/concepts/" title="Concepts" class="dd-item ">
        <a href="/0.8/introduction/concepts/">
        Concepts
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.8/installation/" title="Installing Gloo" class="dd-item 
        
        
        
        ">
      <a href="/0.8/installation/">
          Installing Gloo
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.8/installation/install_with_helm/" title="Installing Gloo with Helm" class="dd-item ">
        <a href="/0.8/installation/install_with_helm/">
        Installing Gloo with Helm
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/installation/gke/" title="Google Kubernetes Engine (GKE)" class="dd-item ">
        <a href="/0.8/installation/gke/">
        Google Kubernetes Engine (GKE)
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.8/installation/docker-compose/" title="Install Gloo using Docker-Compose" class="dd-item 
        
        
        
        ">
      <a href="/0.8/installation/docker-compose/">
          Install Gloo using Docker-Compose
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/installation/node_port/" title="Production Deployment Using NodePort" class="dd-item ">
        <a href="/0.8/installation/node_port/">
        Production Deployment Using NodePort
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.8/user_guides/" title="User Guides" class="dd-item 
        
        
        
        ">
      <a href="/0.8/user_guides/">
          User Guides
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.8/user_guides/basic_routing/" title="Basic Routing" class="dd-item ">
        <a href="/0.8/user_guides/basic_routing/">
        Basic Routing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/user_guides/function_routing/" title="Function Routing" class="dd-item ">
        <a href="/0.8/user_guides/function_routing/">
        Function Routing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/user_guides/external_api_routing/" title="External API Routing" class="dd-item ">
        <a href="/0.8/user_guides/external_api_routing/">
        External API Routing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/user_guides/basic_ingress/" title="Ingress Routing" class="dd-item ">
        <a href="/0.8/user_guides/basic_ingress/">
        Ingress Routing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/user_guides/gloo_with_knative/" title="Gloo with Knative" class="dd-item ">
        <a href="/0.8/user_guides/gloo_with_knative/">
        Gloo with Knative
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.8/operator_guide/" title="Operator Guide" class="dd-item 
        
        
        
        ">
      <a href="/0.8/operator_guide/">
          Operator Guide
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.8/operator_guide/understanding_gloo_configuration/" title="Understanding Gloo Configuration" class="dd-item ">
        <a href="/0.8/operator_guide/understanding_gloo_configuration/">
        Understanding Gloo Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/operator_guide/declarative_infrastructure_and_gitops/" title="Declarative Infrastructure and GitOps" class="dd-item ">
        <a href="/0.8/operator_guide/declarative_infrastructure_and_gitops/">
        Declarative Infrastructure and GitOps
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/operator_guide/gloo_declarative_model/" title="Gloo as Declarative Infrastructure" class="dd-item ">
        <a href="/0.8/operator_guide/gloo_declarative_model/">
        Gloo as Declarative Infrastructure
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.8/v1/" title="API Reference" class="dd-item 
        
        
        
        ">
      <a href="/0.8/v1/">
          API Reference
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/google/protobuf/any.proto.sk/" title="any.proto" class="dd-item ">
        <a href="/0.8/v1/google/protobuf/any.proto.sk/">
        any.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/artifact.proto.sk/" title="artifact.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/artifact.proto.sk/">
        artifact.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/aws/aws.proto.sk/" title="aws.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/aws/aws.proto.sk/">
        aws.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/azure/azure.proto.sk/" title="azure.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/azure/azure.proto.sk/">
        azure.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/clusteringress/api/v1/cluster_ingress.proto.sk/" title="cluster_ingress.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/clusteringress/api/v1/cluster_ingress.proto.sk/">
        cluster_ingress.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/consul/consul.proto.sk/" title="consul.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/consul/consul.proto.sk/">
        consul.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/google/protobuf/descriptor.proto.sk/" title="descriptor.proto" class="dd-item ">
        <a href="/0.8/v1/google/protobuf/descriptor.proto.sk/">
        descriptor.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/google/protobuf/duration.proto.sk/" title="duration.proto" class="dd-item ">
        <a href="/0.8/v1/google/protobuf/duration.proto.sk/">
        duration.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/endpoint.proto.sk/" title="endpoint.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/endpoint.proto.sk/">
        endpoint.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/extensions.proto.sk/" title="extensions.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/extensions.proto.sk/">
        extensions.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/faultinjection/fault.proto.sk/" title="fault.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/faultinjection/fault.proto.sk/">
        fault.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/pkg/plugins/aws/filter.proto.sk/" title="filter.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/pkg/plugins/aws/filter.proto.sk/">
        filter.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gateway/api/v1/gateway.proto.sk/" title="gateway.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gateway/api/v1/gateway.proto.sk/">
        gateway.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/gateway.solo.io.project.sk/" title="gateway.solo.io.project" class="dd-item ">
        <a href="/0.8/v1/gateway.solo.io.project.sk/">
        gateway.solo.io.project
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/gloo.solo.io.project.sk/" title="gloo.solo.io.project" class="dd-item ">
        <a href="/0.8/v1/gloo.solo.io.project.sk/">
        gloo.solo.io.project
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/gogoproto/gogo.proto.sk/" title="gogo.proto" class="dd-item ">
        <a href="/0.8/v1/gogoproto/gogo.proto.sk/">
        gogo.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/grpc/grpc.proto.sk/" title="grpc.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/grpc/grpc.proto.sk/">
        grpc.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/ingress/api/v1/ingress.proto.sk/" title="ingress.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/ingress/api/v1/ingress.proto.sk/">
        ingress.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/kubernetes/kubernetes.proto.sk/" title="kubernetes.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/kubernetes/kubernetes.proto.sk/">
        kubernetes.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/solo-kit/api/v1/metadata.proto.sk/" title="metadata.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/solo-kit/api/v1/metadata.proto.sk/">
        metadata.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/parameters.proto.sk/" title="parameters.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/parameters.proto.sk/">
        parameters.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins.proto.sk/" title="plugins.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins.proto.sk/">
        plugins.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/prefix_rewrite.proto.sk/" title="prefix_rewrite.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/prefix_rewrite.proto.sk/">
        prefix_rewrite.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/proxy.proto.sk/" title="proxy.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/proxy.proto.sk/">
        proxy.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/solo-kit/api/v1/ref.proto.sk/" title="ref.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/solo-kit/api/v1/ref.proto.sk/">
        ref.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/rest/rest.proto.sk/" title="rest.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/rest/rest.proto.sk/">
        rest.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/retries/retries.proto.sk/" title="retries.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/retries/retries.proto.sk/">
        retries.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/secret.proto.sk/" title="secret.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/secret.proto.sk/">
        secret.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/ingress/api/v1/service.proto.sk/" title="service.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/ingress/api/v1/service.proto.sk/">
        service.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/service_spec.proto.sk/" title="service_spec.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/service_spec.proto.sk/">
        service_spec.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/settings.proto.sk/" title="settings.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/settings.proto.sk/">
        settings.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/solo-kit/api/v1/solo-kit.proto.sk/" title="solo-kit.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/solo-kit/api/v1/solo-kit.proto.sk/">
        solo-kit.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/static/static.proto.sk/" title="static.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/static/static.proto.sk/">
        static.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/solo-kit/api/v1/status.proto.sk/" title="status.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/solo-kit/api/v1/status.proto.sk/">
        status.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/google/protobuf/struct.proto.sk/" title="struct.proto" class="dd-item ">
        <a href="/0.8/v1/google/protobuf/struct.proto.sk/">
        struct.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/google/protobuf/timestamp.proto.sk/" title="timestamp.proto" class="dd-item ">
        <a href="/0.8/v1/google/protobuf/timestamp.proto.sk/">
        timestamp.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/transformation.proto.sk/" title="transformation.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/plugins/transformation/transformation.proto.sk/">
        transformation.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/upstream.proto.sk/" title="upstream.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gloo/api/v1/upstream.proto.sk/">
        upstream.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/github.com/solo-io/gloo/projects/gateway/api/v1/virtual_service.proto.sk/" title="virtual_service.proto" class="dd-item ">
        <a href="/0.8/v1/github.com/solo-io/gloo/projects/gateway/api/v1/virtual_service.proto.sk/">
        virtual_service.proto
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/v1/google/protobuf/wrappers.proto.sk/" title="wrappers.proto" class="dd-item ">
        <a href="/0.8/v1/google/protobuf/wrappers.proto.sk/">
        wrappers.proto
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.8/cli/" title="Command Line Reference" class="dd-item 
        
        
        
        ">
      <a href="/0.8/cli/">
          Command Line Reference
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl/" title="glooctl" class="dd-item ">
        <a href="/0.8/cli/glooctl/">
        glooctl
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_add/" title="glooctl add" class="dd-item ">
        <a href="/0.8/cli/glooctl_add/">
        glooctl add
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_add_route/" title="glooctl add route" class="dd-item ">
        <a href="/0.8/cli/glooctl_add_route/">
        glooctl add route
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create/" title="glooctl create" class="dd-item ">
        <a href="/0.8/cli/glooctl_create/">
        glooctl create
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_secret/" title="glooctl create secret" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_secret/">
        glooctl create secret
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_secret_aws/" title="glooctl create secret aws" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_secret_aws/">
        glooctl create secret aws
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_secret_azure/" title="glooctl create secret azure" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_secret_azure/">
        glooctl create secret azure
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_secret_tls/" title="glooctl create secret tls" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_secret_tls/">
        glooctl create secret tls
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_upstream/" title="glooctl create upstream" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_upstream/">
        glooctl create upstream
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_upstream_aws/" title="glooctl create upstream aws" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_upstream_aws/">
        glooctl create upstream aws
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_upstream_azure/" title="glooctl create upstream azure" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_upstream_azure/">
        glooctl create upstream azure
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_upstream_consul/" title="glooctl create upstream consul" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_upstream_consul/">
        glooctl create upstream consul
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_upstream_kube/" title="glooctl create upstream kube" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_upstream_kube/">
        glooctl create upstream kube
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_upstream_static/" title="glooctl create upstream static" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_upstream_static/">
        glooctl create upstream static
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_create_virtualservice/" title="glooctl create virtualservice" class="dd-item ">
        <a href="/0.8/cli/glooctl_create_virtualservice/">
        glooctl create virtualservice
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_delete/" title="glooctl delete" class="dd-item ">
        <a href="/0.8/cli/glooctl_delete/">
        glooctl delete
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_delete_proxy/" title="glooctl delete proxy" class="dd-item ">
        <a href="/0.8/cli/glooctl_delete_proxy/">
        glooctl delete proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_delete_upstream/" title="glooctl delete upstream" class="dd-item ">
        <a href="/0.8/cli/glooctl_delete_upstream/">
        glooctl delete upstream
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_delete_virtualservice/" title="glooctl delete virtualservice" class="dd-item ">
        <a href="/0.8/cli/glooctl_delete_virtualservice/">
        glooctl delete virtualservice
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_get/" title="glooctl get" class="dd-item ">
        <a href="/0.8/cli/glooctl_get/">
        glooctl get
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_get_proxy/" title="glooctl get proxy" class="dd-item ">
        <a href="/0.8/cli/glooctl_get_proxy/">
        glooctl get proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_get_upstream/" title="glooctl get upstream" class="dd-item ">
        <a href="/0.8/cli/glooctl_get_upstream/">
        glooctl get upstream
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_get_virtualservice/" title="glooctl get virtualservice" class="dd-item ">
        <a href="/0.8/cli/glooctl_get_virtualservice/">
        glooctl get virtualservice
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_get_virtualservice_route/" title="glooctl get virtualservice route" class="dd-item ">
        <a href="/0.8/cli/glooctl_get_virtualservice_route/">
        glooctl get virtualservice route
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_install/" title="glooctl install" class="dd-item ">
        <a href="/0.8/cli/glooctl_install/">
        glooctl install
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_install_gateway/" title="glooctl install gateway" class="dd-item ">
        <a href="/0.8/cli/glooctl_install_gateway/">
        glooctl install gateway
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_install_ingress/" title="glooctl install ingress" class="dd-item ">
        <a href="/0.8/cli/glooctl_install_ingress/">
        glooctl install ingress
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_install_knative/" title="glooctl install knative" class="dd-item ">
        <a href="/0.8/cli/glooctl_install_knative/">
        glooctl install knative
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_proxy/" title="glooctl proxy" class="dd-item ">
        <a href="/0.8/cli/glooctl_proxy/">
        glooctl proxy
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_proxy_dump/" title="glooctl proxy dump" class="dd-item ">
        <a href="/0.8/cli/glooctl_proxy_dump/">
        glooctl proxy dump
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_proxy_logs/" title="glooctl proxy logs" class="dd-item ">
        <a href="/0.8/cli/glooctl_proxy_logs/">
        glooctl proxy logs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_proxy_stats/" title="glooctl proxy stats" class="dd-item ">
        <a href="/0.8/cli/glooctl_proxy_stats/">
        glooctl proxy stats
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_proxy_url/" title="glooctl proxy url" class="dd-item ">
        <a href="/0.8/cli/glooctl_proxy_url/">
        glooctl proxy url
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_remove/" title="glooctl remove" class="dd-item ">
        <a href="/0.8/cli/glooctl_remove/">
        glooctl remove
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_remove_route/" title="glooctl remove route" class="dd-item ">
        <a href="/0.8/cli/glooctl_remove_route/">
        glooctl remove route
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_route/" title="glooctl route" class="dd-item ">
        <a href="/0.8/cli/glooctl_route/">
        glooctl route
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_route_sort/" title="glooctl route sort" class="dd-item ">
        <a href="/0.8/cli/glooctl_route_sort/">
        glooctl route sort
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_uninstall/" title="glooctl uninstall" class="dd-item ">
        <a href="/0.8/cli/glooctl_uninstall/">
        glooctl uninstall
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/cli/glooctl_upgrade/" title="glooctl upgrade" class="dd-item ">
        <a href="/0.8/cli/glooctl_upgrade/">
        glooctl upgrade
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/0.8/dev/" title="Developer Guide" class="dd-item 
        parent
        
        
        ">
      <a href="/0.8/dev/">
          Developer Guide
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/0.8/dev/example-proxy-controller/" title="Building a Proxy Controller for Gloo" class="dd-item active">
        <a href="/0.8/dev/example-proxy-controller/">
        Building a Proxy Controller for Gloo
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/0.8/dev/contributing/" title="Contributor Guide" class="dd-item ">
        <a href="/0.8/dev/contributing/">
        Contributor Guide
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/solo-io/gloo"><i class='fab fa-github'></i> Github Repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://solo.io/"><i class='fas fa-bookmark'></i> Solo.io Homepage</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="http://getgrav.org">Grav</a> and <a href="http://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                   Building a Proxy Controller for Gloo 
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#writing-the-code">Writing the Code</a>
<ul>
<li><a href="#initial-code">Initial code</a></li>
<li><a href="#gloo-api-clients">Gloo API Clients</a></li>
<li><a href="#proxy-configuration">Proxy Configuration</a></li>
<li><a href="#event-loop">Event Loop</a></li>
<li><a href="#main-function">Main Function</a></li>
<li><a href="#finished-code">Finished Code</a></li>
<li><a href="#run">Run</a></li>
</ul></li>
<li><a href="#deploying-envoy-to-kubernetes">Deploying Envoy to Kubernetes</a>
<ul>
<li><a href="#creating-the-configmap">Creating the ConfigMap</a></li>
<li><a href="#creating-the-service-and-deployment">Creating the Service and Deployment</a></li>
</ul></li>
<li><a href="#testing-the-proxy">Testing the Proxy</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Building a Proxy Controller for Gloo</h1>
          

        




<p>In this tutorial, we&rsquo;re going to show how to use Gloo&rsquo;s Proxy API to build a router which automatically creates
routes for every existing kubernetes service,</p>

<h2 id="writing-the-code">Writing the Code</h2>

<p>You can view the complete code written in this section here: <a href="example-proxy-controller.go">example-proxy-controller.go</a>.</p>

<h3 id="initial-code">Initial code</h3>

<p>First, we&rsquo;ll start with a <code>main.go</code>. We&rsquo;ll use the main function to connect to
Kubernetes and start an event loop. Start by creating a new <code>main.go</code> file in a new directory:</p>

<pre><code class="language-go">package main

// all the import's we'll need for this controller
import (
	&quot;context&quot;
	&quot;log&quot;
	&quot;os&quot;
	&quot;time&quot;

	&quot;github.com/solo-io/gloo/projects/gloo/pkg/api/v1&quot;
	&quot;github.com/solo-io/go-utils/kubeutils&quot;
	&quot;github.com/solo-io/solo-kit/pkg/api/v1/clients&quot;
	&quot;github.com/solo-io/solo-kit/pkg/api/v1/clients/factory&quot;
	&quot;github.com/solo-io/solo-kit/pkg/api/v1/clients/kube&quot;
	&quot;github.com/solo-io/solo-kit/pkg/api/v1/resources/core&quot;

	// import for GKE
	_ &quot;k8s.io/client-go/plugin/pkg/client/auth/gcp&quot;
)


func main() {}


// make our lives easy
func must(err error) {
	if err != nil {
		panic(err)
	}
}

</code></pre>

<h3 id="gloo-api-clients">Gloo API Clients</h3>

<p>Then we&rsquo;ll want to use Gloo&rsquo;s libraries to initialize a client for Proxies and Upstreams. Add the following function to your code:</p>

<pre><code class="language-go">
func initGlooClients(ctx context.Context) (v1.UpstreamClient, v1.ProxyClient) {
	// root rest config
	restConfig, err := kubeutils.GetConfig(
		os.Getenv(&quot;KUBERNETES_MASTER_URL&quot;),
		os.Getenv(&quot;KUBECONFIG&quot;))
	must(err)

	// wrapper for kubernetes shared informer factory
	cache := kube.NewKubeCache(ctx)

	// initialize the CRD client for Gloo Upstreams
	upstreamClient, err := v1.NewUpstreamClient(&amp;factory.KubeResourceClientFactory{
		Crd:         v1.UpstreamCrd,
		Cfg:         restConfig,
		SharedCache: cache,
	})
	must(err)

	// registering the client registers the type with the client cache
	err = upstreamClient.Register()
	must(err)

	// initialize the CRD client for Gloo Proxies
	proxyClient, err := v1.NewProxyClient(&amp;factory.KubeResourceClientFactory{
		Crd:         v1.ProxyCrd,
		Cfg:         restConfig,
		SharedCache: cache,
	})
	must(err)

	// registering the client registers the type with the client cache
	err = proxyClient.Register()
	must(err)

	return upstreamClient, proxyClient
}

</code></pre>

<p>This function will initialize clients for interacting with Gloo&rsquo;s Upstream and Proxy APIs.</p>

<h3 id="proxy-configuration">Proxy Configuration</h3>

<p>Next, we&rsquo;ll define the algorithm for generating Proxy CRDs from a given list of upstreams. In this example, our
proxy will serve traffic to every service in our cluster.</p>

<p>Paste the following function into your code. Feel free to modify if you want to get experimental, here&rsquo;s where the
&ldquo;opinionated&rdquo; piece of our controller is defined:</p>

<pre><code class="language-go">
// in this function we'll generate an opinionated
// proxy object with a routes for each of our upstreams
func makeDesiredProxy(upstreams v1.UpstreamList) *v1.Proxy {

	// each virtual host represents the table of routes for a given
	// domain or set of domains.
	// in this example, we'll create one virtual host
	// for each upstream.
	var virtualHosts []*v1.VirtualHost

	for _, upstream := range upstreams {

		// create a virtual host for each upstream
		vHostForUpstream := &amp;v1.VirtualHost{
			// logical name of the virtual host, should be unique across vhosts
			Name: upstream.Metadata.Name,

			// the domain will be our &quot;matcher&quot;.
			// requests with the Host header equal to the upstream name
			// will be routed to this upstream
			Domains: []string{upstream.Metadata.Name},

			// we'll create just one route designed to match any request
			// and send it to the upstream for this domain
			Routes: []*v1.Route{{
				// use a basic catch-all matcher
				Matcher: &amp;v1.Matcher{
					PathSpecifier: &amp;v1.Matcher_Prefix{
						Prefix: &quot;/&quot;,
					},
				},

				// tell Gloo where to send the requests
				Action: &amp;v1.Route_RouteAction{
					RouteAction: &amp;v1.RouteAction{
						Destination: &amp;v1.RouteAction_Single{
							// single destination
							Single: &amp;v1.Destination{
								// a &quot;reference&quot; to the upstream, which is a Namespace/Name tuple
								Upstream: upstream.Metadata.Ref(),
							},
						},
					},
				},
			}},
		}

		virtualHosts = append(virtualHosts, vHostForUpstream)
	}

	desiredProxy := &amp;v1.Proxy{
		// metadata will be translated to Kubernetes ObjectMeta
		Metadata: core.Metadata{Namespace: &quot;gloo-system&quot;, Name: &quot;my-cool-proxy&quot;},

		// we have the option of creating multiple listeners,
		// but for the purpose of this example we'll just use one
		Listeners: []*v1.Listener{{
			// logical name for the listener
			Name: &quot;my-amazing-listener&quot;,

			// instruct envoy to bind to all interfaces on port 8080
			BindAddress: &quot;::&quot;, BindPort: 8080,

			// at this point you determine what type of listener
			// to use. here we'll be using the HTTP Listener
			// other listener types are currently unsupported,
			// but future
			ListenerType: &amp;v1.Listener_HttpListener{
				HttpListener: &amp;v1.HttpListener{
					// insert our list of virtual hosts here
					VirtualHosts: virtualHosts,
				},
			}},
		},
	}

	return desiredProxy
}


</code></pre>

<h3 id="event-loop">Event Loop</h3>

<p>Now we&rsquo;ll define a <code>resync</code> function to be called whenever we receive a new list of upstreams:</p>

<pre><code class="language-go">
// we received a new list of upstreams! regenerate the desired proxy
// and write it as a CRD to Kubernetes
func resync(ctx context.Context, upstreams v1.UpstreamList, client v1.ProxyClient) {
	desiredProxy := makeDesiredProxy(upstreams)

	// see if the proxy exists. if yes, update; if no, create
	existingProxy, err := client.Read(
		desiredProxy.Metadata.Namespace,
		desiredProxy.Metadata.Name,
		clients.ReadOpts{Ctx: ctx})


	// proxy exists! this is an update, not a create
	if err == nil {

		// sleep for 1s as Gloo may be re-validating our proxy, which can cause resource version to change
		time.Sleep(time.Second)

		// ensure resource version is the latest
		existingProxy, err = client.Read(
			desiredProxy.Metadata.Namespace,
			desiredProxy.Metadata.Name,
			clients.ReadOpts{Ctx: ctx})
		must(err)

		// update the resource version on our desired proxy
		desiredProxy.Metadata.ResourceVersion = existingProxy.Metadata.ResourceVersion
	}

	// write!
	written, err := client.Write(desiredProxy,
		clients.WriteOpts{Ctx: ctx, OverwriteExisting: true})

	must(err)

	log.Printf(&quot;wrote proxy object: %+v\n&quot;, written)
}


</code></pre>

<h3 id="main-function">Main Function</h3>

<p>Now that we have our clients and a function defining the proxies we&rsquo;ll want to create, all we need to do is tie it
all together.</p>

<p>Let&rsquo;s set up a loop to watch Upstreams in our main function. Add the following to your <code>main()</code> func:</p>

<pre><code class="language-go">
func main() {
	// root context for the whole thing
	ctx := context.Background()

	// initialize Gloo API clients
	upstreamClient, proxyClient := initGlooClients(ctx)

	// start a watch on upstreams. we'll use this as our trigger
	// whenever upstreams are modified, we'll trigger our sync function
	upstreamWatch, watchErrors, initError := upstreamClient.Watch(&quot;gloo-system&quot;,
		clients.WatchOpts{Ctx: ctx})
	must(initError)

	// our &quot;event loop&quot;. an event occurs whenever the list of upstreams has been updated
	for {
		select {
		// if we error during watch, just exit
		case err := &lt;-watchErrors:
			must(err)
		// process a new upstream list
		case newUpstreamList := &lt;-upstreamWatch:
			// we received a new list of upstreams from our watch, 
			resync(ctx, newUpstreamList, proxyClient)
		}
	}
}

</code></pre>

<h3 id="finished-code">Finished Code</h3>

<p>Great! Here&rsquo;s what our completed main file should look like:</p>

<pre><code class="language-go">package main

import (
	&quot;context&quot;
	&quot;log&quot;
	&quot;os&quot;
	&quot;time&quot;

	&quot;github.com/solo-io/gloo/projects/gloo/pkg/api/v1&quot;
	&quot;github.com/solo-io/go-utils/kubeutils&quot;
	&quot;github.com/solo-io/solo-kit/pkg/api/v1/clients&quot;
	&quot;github.com/solo-io/solo-kit/pkg/api/v1/clients/factory&quot;
	&quot;github.com/solo-io/solo-kit/pkg/api/v1/clients/kube&quot;
	&quot;github.com/solo-io/solo-kit/pkg/api/v1/resources/core&quot;

	// import for GKE
	_ &quot;k8s.io/client-go/plugin/pkg/client/auth/gcp&quot;
)

func main() {
	// root context for the whole thing
	ctx := context.Background()

	// initialize Gloo API clients, built on top of CRDs
	upstreamClient, proxyClient := initGlooClients(ctx)

	// start a watch on upstreams. we'll use this as our trigger
	// whenever upstreams are modified, we'll trigger our sync function
	upstreamWatch, watchErrors, initError := upstreamClient.Watch(&quot;gloo-system&quot;,
		clients.WatchOpts{Ctx: ctx})
	must(initError)

	// our &quot;event loop&quot;. an event occurs whenever the list of upstreams has been updated
	for {
		select {
		// if we error during watch, just exit
		case err := &lt;-watchErrors:
			must(err)
		// process a new upstream list
		case newUpstreamList := &lt;-upstreamWatch:
			resync(ctx, newUpstreamList, proxyClient)
		}
	}
}

func initGlooClients(ctx context.Context) (v1.UpstreamClient, v1.ProxyClient) {
	// root rest config
	restConfig, err := kubeutils.GetConfig(
		os.Getenv(&quot;KUBERNETES_MASTER_URL&quot;),
		os.Getenv(&quot;KUBECONFIG&quot;))
	must(err)

	// wrapper for kubernetes shared informer factory
	cache := kube.NewKubeCache(ctx)

	// initialize the CRD client for Gloo Upstreams
	upstreamClient, err := v1.NewUpstreamClient(&amp;factory.KubeResourceClientFactory{
		Crd:         v1.UpstreamCrd,
		Cfg:         restConfig,
		SharedCache: cache,
	})
	must(err)

	// registering the client registers the type with the client cache
	err = upstreamClient.Register()
	must(err)

	// initialize the CRD client for Gloo Proxies
	proxyClient, err := v1.NewProxyClient(&amp;factory.KubeResourceClientFactory{
		Crd:         v1.ProxyCrd,
		Cfg:         restConfig,
		SharedCache: cache,
	})
	must(err)

	// registering the client registers the type with the client cache
	err = proxyClient.Register()
	must(err)

	return upstreamClient, proxyClient
}

// we received a new list of upstreams! regenerate the desired proxy
// and write it as a CRD to Kubernetes
func resync(ctx context.Context, upstreams v1.UpstreamList, client v1.ProxyClient) {
	desiredProxy := makeDesiredProxy(upstreams)

	// see if the proxy exists. if yes, update; if no, create
	existingProxy, err := client.Read(
		desiredProxy.Metadata.Namespace,
		desiredProxy.Metadata.Name,
		clients.ReadOpts{Ctx: ctx})


	// proxy exists! this is an update, not a create
	if err == nil {

		// sleep for 1s as Gloo may be re-validating our proxy, which can cause resource version to change
		time.Sleep(time.Second)

		// ensure resource version is the latest
		existingProxy, err = client.Read(
			desiredProxy.Metadata.Namespace,
			desiredProxy.Metadata.Name,
			clients.ReadOpts{Ctx: ctx})
		must(err)

		// update the resource version on our desired proxy
		desiredProxy.Metadata.ResourceVersion = existingProxy.Metadata.ResourceVersion
	}

	// write!
	written, err := client.Write(desiredProxy,
		clients.WriteOpts{Ctx: ctx, OverwriteExisting: true})

	must(err)

	log.Printf(&quot;wrote proxy object: %+v\n&quot;, written)
}

// in this function we'll generate an opinionated
// proxy object with a routes for each of our upstreams
func makeDesiredProxy(upstreams v1.UpstreamList) *v1.Proxy {

	// each virtual host represents the table of routes for a given
	// domain or set of domains.
	// in this example, we'll create one virtual host
	// for each upstream.
	var virtualHosts []*v1.VirtualHost

	for _, upstream := range upstreams {

		// create a virtual host for each upstream
		vHostForUpstream := &amp;v1.VirtualHost{
			// logical name of the virtual host, should be unique across vhosts
			Name: upstream.Metadata.Name,

			// the domain will be our &quot;matcher&quot;.
			// requests with the Host header equal to the upstream name
			// will be routed to this upstream
			Domains: []string{upstream.Metadata.Name},

			// we'll create just one route designed to match any request
			// and send it to the upstream for this domain
			Routes: []*v1.Route{{
				// use a basic catch-all matcher
				Matcher: &amp;v1.Matcher{
					PathSpecifier: &amp;v1.Matcher_Prefix{
						Prefix: &quot;/&quot;,
					},
				},

				// tell Gloo where to send the requests
				Action: &amp;v1.Route_RouteAction{
					RouteAction: &amp;v1.RouteAction{
						Destination: &amp;v1.RouteAction_Single{
							// single destination
							Single: &amp;v1.Destination{
								// a &quot;reference&quot; to the upstream, which is a Namespace/Name tuple
								Upstream: upstream.Metadata.Ref(),
							},
						},
					},
				},
			}},
		}

		virtualHosts = append(virtualHosts, vHostForUpstream)
	}

	desiredProxy := &amp;v1.Proxy{
		// metadata will be translated to Kubernetes ObjectMeta
		Metadata: core.Metadata{Namespace: &quot;gloo-system&quot;, Name: &quot;my-cool-proxy&quot;},

		// we have the option of creating multiple listeners,
		// but for the purpose of this example we'll just use one
		Listeners: []*v1.Listener{{
			// logical name for the listener
			Name: &quot;my-amazing-listener&quot;,

			// instruct envoy to bind to all interfaces on port 8080
			BindAddress: &quot;::&quot;, BindPort: 8080,

			// at this point you determine what type of listener
			// to use. here we'll be using the HTTP Listener
			// other listener types are currently unsupported,
			// but future
			ListenerType: &amp;v1.Listener_HttpListener{
				HttpListener: &amp;v1.HttpListener{
					// insert our list of virtual hosts here
					VirtualHosts: virtualHosts,
				},
			}},
		},
	}

	return desiredProxy
}

// make our lives easy
func must(err error) {
	if err != nil {
		panic(err)
	}
}


</code></pre>

<h3 id="run">Run</h3>

<p>In order to run this file, you&rsquo;ll need to pull the dependencies into your local workspace. <code>go get -v ./...</code> from your
working dir, or <code>dep init</code> (if you&rsquo;re comfortable using <a href="https://github.com/golang/dep"><code>dep</code></a>) should work fine.</p>

<pre><code class="language-bash">dep init -v

# or

go get -v ./..

</code></pre>

<p>While it&rsquo;s possible to package this application in a Docker container and deploy it as a pod inside of Kubernetes, let&rsquo;s
just try running it locally. <a href="../installation/_index.md">Make sure you have Gloo installed</a> in your cluster so
that Discovery will create some Upstreams for us.</p>

<p>Once that&rsquo;s done, to see our code in action, simply run <code>go run main.go</code> !</p>

<pre><code class="language-bash">go run main.go

2019/02/11 11:27:30 wrote proxy object: listeners:&lt;name:&quot;my-amazing-listener&quot; bind_address:&quot;::&quot; bind_port:8080 http_listener:&lt;virtual_hosts:&lt;name:&quot;default-kubernetes-443&quot; domains:&quot;default-kubernetes-443&quot; routes:&lt;matcher:&lt;prefix:&quot;/&quot; &gt; route_action:&lt;single:&lt;upstream:&lt;name:&quot;default-kubernetes-443&quot; namespace:&quot;gloo-system&quot; &gt; &gt; &gt; &gt; &gt; virtual_hosts:&lt;name:&quot;gloo-system-gateway-proxy-8080&quot; domains:&quot;gloo-system-gateway-proxy-8080&quot; routes:&lt;matcher:&lt;prefix:&quot;/&quot; &gt; route_action:&lt;single:&lt;upstream:&lt;name:&quot;gloo-system-gateway-proxy-8080&quot; namespace:&quot;gloo-system&quot; &gt; &gt; &gt; &gt; &gt; virtual_hosts:&lt;name:&quot;gloo-system-gloo-9977&quot; domains:&quot;gloo-system-gloo-9977&quot; routes:&lt;matcher:&lt;prefix:&quot;/&quot; &gt; route_action:&lt;single:&lt;upstream:&lt;name:&quot;gloo-system-gloo-9977&quot; namespace:&quot;gloo-system&quot; &gt; &gt; &gt; &gt; &gt; virtual_hosts:&lt;name:&quot;kube-system-kube-dns-53&quot; domains:&quot;kube-system-kube-dns-53&quot; routes:&lt;matcher:&lt;prefix:&quot;/&quot; &gt; route_action:&lt;single:&lt;upstream:&lt;name:&quot;kube-system-kube-dns-53&quot; namespace:&quot;gloo-system&quot; &gt; &gt; &gt; &gt; &gt; virtual_hosts:&lt;name:&quot;kube-system-tiller-deploy-44134&quot; domains:&quot;kube-system-tiller-deploy-44134&quot; routes:&lt;matcher:&lt;prefix:&quot;/&quot; &gt; route_action:&lt;single:&lt;upstream:&lt;name:&quot;kube-system-tiller-deploy-44134&quot; namespace:&quot;gloo-system&quot; &gt; &gt; &gt; &gt; &gt; &gt; &gt; status:&lt;&gt; metadata:&lt;name:&quot;my-cool-proxy&quot; namespace:&quot;gloo-system&quot; resource_version:&quot;455073&quot; &gt; 

</code></pre>

<p>Neat! Our proxy got created. We can view it with <code>kubectl</code>:</p>

<pre><code class="language-bash">kubectl get proxy -n gloo-system -o yaml


apiVersion: v1
items:
- apiVersion: gloo.solo.io/v1
  kind: Proxy
  metadata:
    creationTimestamp: 2019-02-11T16:27:30Z
    generation: 1
    name: my-cool-proxy
    namespace: gloo-system
    resourceVersion: &quot;455074&quot;
    selfLink: /apis/gloo.solo.io/v1/namespaces/gloo-system/proxies/my-cool-proxy
    uid: eda0ba6f-2e19-11e9-b401-c075ea19232f
  spec:
    listeners:
    - bindAddress: '::'
      bindPort: 8080
      httpListener:
        virtualHosts:
        - domains:
          - default-kubernetes-443
          name: default-kubernetes-443
          routes:
          - matcher:
              prefix: /
            routeAction:
              single:
                upstream:
                  name: default-kubernetes-443
                  namespace: gloo-system
        - domains:
          - gloo-system-gateway-proxy-8080
          name: gloo-system-gateway-proxy-8080
          routes:
          - matcher:
              prefix: /
            routeAction:
              single:
                upstream:
                  name: gloo-system-gateway-proxy-8080
                  namespace: gloo-system
        - domains:
          - gloo-system-gloo-9977
          name: gloo-system-gloo-9977
          routes:
          - matcher:
              prefix: /
            routeAction:
              single:
                upstream:
                  name: gloo-system-gloo-9977
                  namespace: gloo-system
        - domains:
          - kube-system-kube-dns-53
          name: kube-system-kube-dns-53
          routes:
          - matcher:
              prefix: /
            routeAction:
              single:
                upstream:
                  name: kube-system-kube-dns-53
                  namespace: gloo-system
        - domains:
          - kube-system-tiller-deploy-44134
          name: kube-system-tiller-deploy-44134
          routes:
          - matcher:
              prefix: /
            routeAction:
              single:
                upstream:
                  name: kube-system-tiller-deploy-44134
                  namespace: gloo-system
      name: my-amazing-listener
  status:
    reported_by: gloo
    state: 1
kind: List
metadata:
  resourceVersion: &quot;&quot;
  selfLink: &quot;&quot;


</code></pre>

<p>Cool. Let&rsquo;s leave our controller running and watch it dynamically respond when we add a service to our cluster:</p>

<pre><code class="language-bash">kubectl apply -f \
  https://raw.githubusercontent.com/solo-io/gloo/master/example/petstore/petstore.yaml
</code></pre>

<p>See the service and pod:</p>

<pre><code class="language-bash">kubectl get pod -n default &amp;&amp; kubectl get svc -n default

NAME                      READY     STATUS    RESTARTS   AGE
petstore-6fd84bc9-zdskz   1/1       Running   0          5s
NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE
kubernetes   ClusterIP   10.96.0.1       &lt;none&gt;        443/TCP    6d
petstore     ClusterIP   10.109.34.250   &lt;none&gt;        8080/TCP   5s

</code></pre>

<p>The upstream that was created:</p>

<pre><code class="language-bash">kubectl get upstream

NAME                              AGE
default-kubernetes-443            2m
default-petstore-8080             46s # &lt;- this one's new
gloo-system-gateway-proxy-8080    2m
gloo-system-gloo-9977             2m
kube-system-kube-dns-53           2m
kube-system-tiller-deploy-44134   2m
</code></pre>

<p>And check that our proxy object was updated:</p>

<pre><code class="language-bash">kubectl get proxy -n gloo-system -o yaml

apiVersion: v1
items:
- apiVersion: gloo.solo.io/v1
  kind: Proxy
  metadata:
    creationTimestamp: 2019-02-11T19:03:48Z
    generation: 1
    name: my-cool-proxy
    namespace: gloo-system
    resourceVersion: &quot;470446&quot;
    selfLink: /apis/gloo.solo.io/v1/namespaces/gloo-system/proxies/my-cool-proxy
    uid: c2f058fb-2e2f-11e9-b401-c075ea19232f
  spec:
    listeners:
    - bindAddress: '::'
      bindPort: 8080
      httpListener:
        virtualHosts:
        ...
        - domains:
          - default-petstore-8080
          name: default-petstore-8080
          routes:
          - matcher:
              prefix: /
            routeAction:
              single:
                upstream:
                  name: default-petstore-8080
                  namespace: gloo-system
        ...
      name: my-amazing-listener
  status:
    reported_by: gloo
    state: 1
kind: List
metadata:
  resourceVersion: &quot;&quot;
  selfLink: &quot;&quot;

</code></pre>

<p>The proxy should have been create with the <code>default-petstore-8080</code> virtualHost.</p>

<p>Now that we have a proxy called <code>my-cool-proxy</code>, Gloo will be serving xDS configuration that matches this proxy CRD.
However, we don&rsquo;t actually have an Envoy instance deployed that will receive this config. In the next section,
we&rsquo;ll walk through the steps to deploy an Envoy pod wired to receive config from Gloo, identifying itself as
<code>my-cool-proxy</code>.</p>

<h2 id="deploying-envoy-to-kubernetes">Deploying Envoy to Kubernetes</h2>

<p>Gloo comes pre-installed with at least one proxy depending on your setup: the <code>gateway-proxy</code>. This proxy is configured
by the <code>gateway</code> proxy controller. It&rsquo;s not very different from the controller we just wrote!</p>

<p>We&rsquo;ll need to deploy another proxy that will register to Gloo with it&rsquo;s <code>role</code> configured to match the name of our proxy
CRD, <code>my-cool-proxy</code>. Let&rsquo;s do it!</p>

<h3 id="creating-the-configmap">Creating the ConfigMap</h3>

<p>Envoy needs a ConfigMap which points it at Gloo as its configuration server. Run the following command to create
the configmap you&rsquo;ll need:</p>

<pre><code class="language-bash">cat &lt;&lt; EOF | kubectl apply -f -
apiVersion: v1
kind: ConfigMap
metadata:
  name: my-cool-envoy-config
  namespace: default
data:
  envoy.yaml: |
    node:
      cluster: &quot;1&quot;
      id: &quot;1&quot;
      metadata:

        # this line is what connects this envoy instance to our Proxy crd
        role: &quot;gloo-system~my-cool-proxy&quot;

    static_resources:
      clusters:
      - name: xds_cluster
        connect_timeout: 5.000s
        load_assignment:
          cluster_name: xds_cluster
          endpoints:
          - lb_endpoints:
            - endpoint:
                address:
                  socket_address:

                    # here's where we provide the hostname of the gloo service
                    address: gloo.gloo-system.svc.cluster.local

                    port_value: 9977
        http2_protocol_options: {}
        type: STRICT_DNS
    dynamic_resources:
      ads_config:
        api_type: GRPC
        grpc_services:
        - envoy_grpc: {cluster_name: xds_cluster}
      cds_config:
        ads: {}
      lds_config:
        ads: {}
    admin:
      access_log_path: /dev/null
      address:
        socket_address:
          address: 127.0.0.1
          port_value: 19000
EOF
</code></pre>

<p>Note that this will create the configmap in the <code>default</code> namespace, but you can run it anywhere. Just make sure
the proxy deployment and service all go to the same namespace.</p>

<h3 id="creating-the-service-and-deployment">Creating the Service and Deployment</h3>

<p>We need to create a <code>LoadBalancer</code> service for our proxy so we can connect to it from the outside. Note that
if you&rsquo;re using a Kubernetes Cluster without an external load balancer (e.g. minikube), we&rsquo;ll be using the service&rsquo;s
<code>NodePort</code> to connect.</p>

<p>Run the following command to create the service:</p>

<pre><code class="language-bash">cat &lt;&lt; EOF | kubectl apply -f -
apiVersion: v1
kind: Service
metadata:
  labels:
    gloo: my-cool-proxy
  name: my-cool-proxy
  namespace: default
spec:
  ports:
  - port: 8080 # &lt;- this port should match the port for the HttpListener in our Proxy CRD
    protocol: TCP
    name: http
  selector:
    gloo: my-cool-proxy
  type: LoadBalancer
EOF

</code></pre>

<p>Finally we&rsquo;ll want to create the deployment itself which will launch a pod with Envoy running inside.</p>

<pre><code class="language-bash">cat &lt;&lt; EOF | kubectl apply -f -
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    gloo: my-cool-proxy
  name: my-cool-proxy
  namespace: default
spec:
  replicas: 
  selector:
    matchLabels:
      gloo: my-cool-proxy
  template:
    metadata:
      labels:
        gloo: my-cool-proxy
    spec:
      containers:
      - args: [&quot;--disable-hot-restart&quot;]
        env:
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        image: soloio/gloo-envoy-wrapper:0.6.19
        imagePullPolicy: Always
        name: my-cool-proxy
        ports:
        - containerPort: 8080 # &lt;- this port should match the port for the HttpListener in our Proxy CRD
          name: http
          protocol: TCP
        volumeMounts:
        - mountPath: /etc/envoy
          name: envoy-config
      volumes:
      - configMap:
          name: my-cool-envoy-config
        name: envoy-config
EOF
</code></pre>

<p>If all went well, we should see our pod starting successfully in <code>default</code> (or whichever namespace you picked):</p>

<pre><code class="language-bash">kubectl get pod -n default

NAME                             READY     STATUS    RESTARTS   AGE
my-cool-proxy-7bcb58c87d-h4292   1/1       Running   0          3s
petstore-6fd84bc9-zdskz          1/1       Running   0          48m
</code></pre>

<h2 id="testing-the-proxy">Testing the Proxy</h2>

<p>If you have <code>glooctl</code> installed, we can grab the HTTP endpoint of the proxy with the following command:</p>

<pre><code class="language-bash">glooctl proxy url -n default -p my-cool-proxy

http://192.168.99.150:30751
</code></pre>

<p>Using <code>curl</code>, we can connect to any service in our cluster by using the correct <code>Host</code> header:</p>

<pre><code class="language-bash">curl $(glooctl proxy url -n default -p my-cool-proxy)/api/pets -H &quot;Host: default-petstore-8080&quot;

[{&quot;id&quot;:1,&quot;name&quot;:&quot;Dog&quot;,&quot;status&quot;:&quot;available&quot;},{&quot;id&quot;:2,&quot;name&quot;:&quot;Cat&quot;,&quot;status&quot;:&quot;pending&quot;}]
</code></pre>

<p>Try any <code>Host</code> header for any upstream name:</p>

<pre><code class="language-bash">kubectl get upstream

NAME                              AGE
default-kubernetes-443            55m
default-my-cool-proxy-8080        5m
default-petstore-8080             53m
gloo-system-gateway-proxy-8080    55m
gloo-system-gloo-9977             54m
kube-system-kube-dns-53           54m
kube-system-tiller-deploy-44134   54m

</code></pre>

<p>Sweet! You&rsquo;re an official Gloo developer! You&rsquo;ve just seen how easy it is to extend Gloo to service one of many
potential use cases. Take a look at our
<a href="../v1/github.com/solo-io/gloo/projects/gloo/api/v1/proxy.proto.sk.md">API Reference Documentation</a> to learn about the
wide range of configuration options Proxies expose such as request transformation, SSL termination, serverless computing,
and much more.</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/0.8/dev/" title="Developer Guide"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/0.8/dev/contributing/" title="Contributor Guide" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1550255485"></script>
    <script src="/js/perfect-scrollbar.min.js?1550255485"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1550255485"></script>
    <script src="/js/jquery.sticky.js?1550255485"></script>
    <script src="/js/featherlight.min.js?1550255485"></script>
    <script src="/js/html5shiv-printshiv.min.js?1550255485"></script>
    <script src="/js/highlight.pack.js?1550255485"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js?1550255485"></script>
    <script src="/js/learn.js?1550255485"></script>
    <script src="/js/hugo-learn.js?1550255485"></script>

    <link href="/mermaid/mermaid.css?1550255485" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1550255485"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

